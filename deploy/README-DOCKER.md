# ๐ณ ะะฐะทะฒะตัััะฒะฐะฝะธะต ะฟัะพะตะบัะฐ Forel ั ะฟะพะผะพััั Docker

## ๐ฏ ะะฑะทะพั

ะญัะพั ะดะพะบัะผะตะฝั ะพะฟะธััะฒะฐะตั ัะฐะทะฒะตัััะฒะฐะฝะธะต ะฟัะพะตะบัะฐ Forel ั ะธัะฟะพะปัะทะพะฒะฐะฝะธะตะผ Docker ะธ Docker Compose. Docker ะทะฝะฐัะธัะตะปัะฝะพ ัะฟัะพัะฐะตั ะฟัะพัะตัั ัะฐะทะฒะตัััะฒะฐะฝะธั ะธ ะพะฑะตัะฟะตัะธะฒะฐะตั ะบะพะฝัะธััะตะฝัะฝะพััั ะผะตะถะดั ัะฐะทะปะธัะฝัะผะธ ััะตะดะฐะผะธ.

## ๐ ะขัะตะฑะพะฒะฐะฝะธั

- Docker Engine 20.10+
- Docker Compose 2.0+
- Git
- ะะธะฝะธะผัะผ 2GB RAM
- 10GB ัะฒะพะฑะพะดะฝะพะณะพ ะผะตััะฐ ะฝะฐ ะดะธัะบะต

## ๐ ะััััะพะต ัะฐะทะฒะตัััะฒะฐะฝะธะต

### 1. ะะพะดะณะพัะพะฒะบะฐ ัะตัะฒะตัะฐ

```bash
# ะะฑะฝะพะฒะปัะตะผ ัะธััะตะผั
sudo apt update && sudo apt upgrade -y

# ะฃััะฐะฝะฐะฒะปะธะฒะฐะตะผ Docker
curl -fsSL https://get.docker.com -o get-docker.sh
sudo sh get-docker.sh

# ะะพะฑะฐะฒะปัะตะผ ะฟะพะปัะทะพะฒะฐัะตะปั ะฒ ะณััะฟะฟั docker
sudo usermod -aG docker $USER

# ะฃััะฐะฝะฐะฒะปะธะฒะฐะตะผ Docker Compose
sudo curl -L "https://github.com/docker/compose/releases/latest/download/docker-compose-$(uname -s)-$(uname -m)" -o /usr/local/bin/docker-compose
sudo chmod +x /usr/local/bin/docker-compose

# ะะตัะตะทะฐะณััะถะฐะตะผัั ะธะปะธ ะฟะตัะตะปะพะณะธะฝะธะฒะฐะตะผัั
sudo reboot
```

### 2. ะะปะพะฝะธัะพะฒะฐะฝะธะต ะฟัะพะตะบัะฐ

```bash
# ะกะพะทะดะฐะตะผ ะดะธัะตะบัะพัะธั ะดะปั ะฟัะพะตะบัะฐ
sudo mkdir -p /var/www/forel
sudo chown $USER:$USER /var/www/forel
cd /var/www/forel

# ะะปะพะฝะธััะตะผ ะฟัะพะตะบั
git clone <your-repository-url> .
```

### 3. ะะฐัััะพะนะบะฐ ะฟะตัะตะผะตะฝะฝัั ะพะบััะถะตะฝะธั

```bash
# ะะตัะตัะพะดะธะผ ะฒ ะฟะฐะฟะบั deploy
cd deploy

# ะกะพะทะดะฐะตะผ ัะฐะนะป .env
nano .env
```

**ะกะพะดะตัะถะธะผะพะต `deploy/.env`:**
```env
# Docker Environment Variables
JWT_SECRET=your-super-secret-jwt-key-change-this-in-production
TELEGRAM_BOT_TOKEN=8489499457:AAEYJsk8jN3qynY2J4DoPSlqU1ghMdwlbSQ
TELEGRAM_ADMIN_CHAT_ID=your-admin-chat-id
```

### 4. ะะฐัััะพะนะบะฐ SSL ัะตััะธัะธะบะฐัะพะฒ (ะพะฟัะธะพะฝะฐะปัะฝะพ)

```bash
# ะกะพะทะดะฐะตะผ ะดะธัะตะบัะพัะธั ะดะปั SSL
mkdir -p ssl

# ะัะปะธ ั ะฒะฐั ะตััั SSL ัะตััะธัะธะบะฐัั, ัะบะพะฟะธััะนัะต ะธั:
# sudo cp /path/to/your/certificate.crt ssl/
# sudo cp /path/to/your/private.key ssl/
```

### 5. ะะฐะฟััะบ ะฟัะพะตะบัะฐ

```bash
# ะะตะปะฐะตะผ ัะบัะธะฟัั ะธัะฟะพะปะฝัะตะผัะผะธ
chmod +x *.sh

# ะะฐะฟััะบะฐะตะผ ะฟัะพะตะบั
./docker-start.sh
```

## ๐ง ะฃะฟัะฐะฒะปะตะฝะธะต ะฟัะพะตะบัะพะผ

### ะะฐะฟััะบ
```bash
cd /var/www/forel/deploy
./docker-start.sh
```

### ะััะฐะฝะพะฒะบะฐ
```bash
cd /var/www/forel/deploy
./docker-stop.sh
```

### ะัะพะฒะตัะบะฐ ััะฐัััะฐ
```bash
cd /var/www/forel/deploy
./docker-status.sh
```

### ะัะพัะผะพัั ะปะพะณะพะฒ
```bash
# ะะพะณะธ API ัะตัะฒะตัะฐ
docker-compose -f docker-compose.prod.yml logs -f api-server

# ะะพะณะธ ะฒะตะฑ-ัะฐะนัะฐ
docker-compose -f docker-compose.prod.yml logs -f web-app

# ะะพะณะธ Telegram WebApp
docker-compose -f docker-compose.prod.yml logs -f telegram-webapp

# ะะพะณะธ Telegram ะฑะพัะฐ
docker-compose -f docker-compose.prod.yml logs -f telegram-bot

# ะะพะณะธ Nginx
docker-compose -f docker-compose.prod.yml logs -f nginx
```

## ๐๏ธ ะััะธัะตะบัััะฐ

```
โโโโโโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโโ
โ   Nginx Proxy   โ    โ   Web App       โ    โ  Telegram WebAppโ
โ   (Port 80/443) โ    โ   (Port 8080)   โ    โ  (Port 8081)    โ
โโโโโโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโโ
         โ                       โ                       โ
         โโโโโโโโโโโโโโโโโโโโโโโโโผโโโโโโโโโโโโโโโโโโโโโโโโ
                                 โ
                    โโโโโโโโโโโโโโโโโโโ
                    โ   API Server    โ
                    โ   (Port 3001)   โ
                    โโโโโโโโโโโโโโโโโโโ
                                 โ
                    โโโโโโโโโโโโโโโโโโโ
                    โ  Telegram Bot   โ
                    โโโโโโโโโโโโโโโโโโโ
```

## ๐ ะะพะฝะธัะพัะธะฝะณ

### ะัะพะฒะตัะบะฐ ะทะดะพัะพะฒัั ัะตัะฒะธัะพะฒ
```bash
# ะัะพะฒะตััะตะผ ััะฐััั ะฒัะตั ะบะพะฝัะตะนะฝะตัะพะฒ
docker-compose -f docker-compose.prod.yml ps

# ะัะพะฒะตััะตะผ ะธัะฟะพะปัะทะพะฒะฐะฝะธะต ัะตััััะพะฒ
docker stats

# ะัะพะฒะตััะตะผ ะปะพะณะธ
docker-compose -f docker-compose.prod.yml logs --tail=50
```

### ะะฒัะพะผะฐัะธัะตัะบะธะน ะฟะตัะตะทะฐะฟััะบ
ะัะต ัะตัะฒะธัั ะฝะฐัััะพะตะฝั ะฝะฐ ะฐะฒัะพะผะฐัะธัะตัะบะธะน ะฟะตัะตะทะฐะฟััะบ ะฟัะธ ัะฑะพัั (`restart: unless-stopped`).

## ๐ ะะฑะฝะพะฒะปะตะฝะธะต

### ะะฑะฝะพะฒะปะตะฝะธะต ะบะพะดะฐ
```bash
# ะััะฐะฝะฐะฒะปะธะฒะฐะตะผ ะฟัะพะตะบั
cd /var/www/forel/deploy
./docker-stop.sh

# ะะฑะฝะพะฒะปัะตะผ ะบะพะด
cd /var/www/forel
git pull origin main

# ะะตัะตัะพะฑะธัะฐะตะผ ะธ ะทะฐะฟััะบะฐะตะผ
cd deploy
./docker-start.sh
```

### ะะฑะฝะพะฒะปะตะฝะธะต ะพะฑัะฐะทะพะฒ
```bash
# ะฃะดะฐะปัะตะผ ััะฐััะต ะพะฑัะฐะทั
docker-compose -f docker-compose.prod.yml down --rmi all

# ะะตัะตัะพะฑะธัะฐะตะผ ะพะฑัะฐะทั
docker-compose -f docker-compose.prod.yml up --build -d
```

## ๐๏ธ ะฃัััะฐะฝะตะฝะธะต ะฝะตะฟะพะปะฐะดะพะบ

### ะัะปะธ ะบะพะฝัะตะนะฝะตัั ะฝะต ะทะฐะฟััะบะฐัััั
```bash
# ะัะพะฒะตััะตะผ ะปะพะณะธ
docker-compose -f docker-compose.prod.yml logs

# ะัะพะฒะตััะตะผ ััะฐััั
docker-compose -f docker-compose.prod.yml ps

# ะะตัะตะทะฐะฟััะบะฐะตะผ
docker-compose -f docker-compose.prod.yml restart
```

### ะัะปะธ ะฟะพััั ะทะฐะฝััั
```bash
# ะัะพะฒะตััะตะผ ะทะฐะฝัััะต ะฟะพััั
sudo netstat -tlnp | grep -E ':(80|443|3001|8080|8081)'

# ะััะฐะฝะฐะฒะปะธะฒะฐะตะผ ะบะพะฝัะปะธะบััััะธะต ัะตัะฒะธัั
sudo systemctl stop nginx  # ะตัะปะธ ะทะฐะฟััะตะฝ
sudo systemctl stop apache2  # ะตัะปะธ ะทะฐะฟััะตะฝ
```

### ะัะปะธ ะฟัะพะฑะปะตะผั ั ะฟัะฐะฒะฐะผะธ ะดะพัััะฟะฐ
```bash
# ะัะฟัะฐะฒะปัะตะผ ะฟัะฐะฒะฐ ะดะพัััะฟะฐ
sudo chown -R $USER:$USER /var/www/forel
sudo chmod -R 755 /var/www/forel
```

## ๐ ะงะตะบ-ะปะธัั

- [ ] Docker ัััะฐะฝะพะฒะปะตะฝ ะธ ัะฐะฑะพัะฐะตั
- [ ] Docker Compose ัััะฐะฝะพะฒะปะตะฝ
- [ ] ะัะพะตะบั ัะบะปะพะฝะธัะพะฒะฐะฝ
- [ ] ะคะฐะนะป .env ัะพะทะดะฐะฝ ะธ ะฝะฐัััะพะตะฝ
- [ ] SSL ัะตััะธัะธะบะฐัั ะฝะฐัััะพะตะฝั (ะพะฟัะธะพะฝะฐะปัะฝะพ)
- [ ] ะะพะฝัะตะนะฝะตัั ะทะฐะฟััะตะฝั
- [ ] ะะตะฑ-ัะฐะนั ะดะพัััะฟะตะฝ
- [ ] Telegram WebApp ะดะพัััะฟะตะฝ
- [ ] API ัะฐะฑะพัะฐะตั
- [ ] Telegram ะฑะพั ัะฐะฑะพัะฐะตั
- [ ] ะะดะผะธะฝะบะฐ ะดะพัััะฟะฝะฐ

## ๐ฏ ะะตะทัะปััะฐั

ะะพัะปะต ะฒัะฟะพะปะฝะตะฝะธั ะฒัะตั ัะฐะณะพะฒ ั ะฒะฐั ะฑัะดะตั:

1. **ะะตะฑ-ัะฐะนั** ะดะพัััะฟะตะฝ ะฟะพ ะฐะดัะตัั `http://localhost` (ะธะปะธ `https://forelrest.com`)
2. **Telegram WebApp** ะดะพัััะฟะตะฝ ะฟะพ ะฐะดัะตัั `http://localhost:8081` (ะธะปะธ `https://telegram.forelrest.com`)
3. **ะะดะผะธะฝะบะฐ** ะดะพัััะฟะฝะฐ ะฟะพ ะฐะดัะตัั `http://localhost/admin` (ะบะพะด: 0202)
4. **API ัะตัะฒะตั** ัะฐะฑะพัะฐะตั ะฝะฐ `http://localhost:3001/api`
5. **Telegram ะฑะพั** ัะฐะฑะพัะฐะตั ะธ ะพัะฒะตัะฐะตั ะฝะฐ ะบะพะผะฐะฝะดั

ะัะต ะบะพะผะฟะพะฝะตะฝัั ะธะทะพะปะธัะพะฒะฐะฝั ะฒ Docker-ะบะพะฝัะตะนะฝะตัะฐั ะธ ะธัะฟะพะปัะทััั ะตะดะธะฝัั ะฑะฐะทั ะดะฐะฝะฝัั.

## ๐ ะะตะทะพะฟะฐัะฝะพััั

- ะัะต ัะตัะฒะธัั ัะฐะฑะพัะฐัั ะฒ ะธะทะพะปะธัะพะฒะฐะฝะฝัั ะบะพะฝัะตะนะฝะตัะฐั
- Nginx ะฝะฐัััะพะตะฝ ั ะฑะฐะทะพะฒัะผะธ ะทะฐะณะพะปะพะฒะบะฐะผะธ ะฑะตะทะพะฟะฐัะฝะพััะธ
- JWT ัะพะบะตะฝั ะธัะฟะพะปัะทััััั ะดะปั ะฐััะตะฝัะธัะธะบะฐัะธะธ
- SSL/TLS ัะธััะพะฒะฐะฝะธะต ะดะปั HTTPS ัะพะตะดะธะฝะตะฝะธะน
- ะะตัะตะผะตะฝะฝัะต ะพะบััะถะตะฝะธั ะดะปั ััะฒััะฒะธัะตะปัะฝัั ะดะฐะฝะฝัั

## ๐ ะะพะดะดะตัะถะบะฐ

ะัะธ ะฒะพะทะฝะธะบะฝะพะฒะตะฝะธะธ ะฟัะพะฑะปะตะผ:

1. ะัะพะฒะตัััะต ะปะพะณะธ: `docker-compose -f docker-compose.prod.yml logs -f [service]`
2. ะัะพะฒะตัััะต ััะฐััั ะบะพะฝัะตะนะฝะตัะพะฒ: `docker-compose -f docker-compose.prod.yml ps`
3. ะัะพะฒะตัััะต ะธัะฟะพะปัะทะพะฒะฐะฝะธะต ัะตััััะพะฒ: `docker stats`
4. ะะฑัะฐัะธัะตัั ะบ ะดะพะบัะผะตะฝัะฐัะธะธ Docker: https://docs.docker.com/
