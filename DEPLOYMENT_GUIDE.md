# ðŸš€ Ð˜Ð½ÑÑ‚Ñ€ÑƒÐºÑ†Ð¸Ñ Ð¿Ð¾ Ñ€Ð°Ð·Ð²ÐµÑ€Ñ‚Ñ‹Ð²Ð°Ð½Ð¸ÑŽ Ð½Ð° TimeWeb

## ðŸ“‹ Ð¢Ñ€ÐµÐ±Ð¾Ð²Ð°Ð½Ð¸Ñ Ðº ÑÐµÑ€Ð²ÐµÑ€Ñƒ
- **VPS ÑÐµÑ€Ð²ÐµÑ€**: 2 CPU, 4 GB RAM, 20 GB SSD (Ð¼Ð¸Ð½Ð¸Ð¼ÑƒÐ¼)
- **ÐžÐ¡**: Ubuntu 22.04 LTS
- **Ð”Ð¾Ð¼ÐµÐ½Ñ‹**: forelrest.com, telegram.forelrest.com

## ðŸ“‹ Ð”Ð°Ð½Ð½Ñ‹Ðµ Ð²Ð°ÑˆÐµÐ³Ð¾ ÑÐµÑ€Ð²ÐµÑ€Ð°:
- **ÐŸÑƒÐ±Ð»Ð¸Ñ‡Ð½Ñ‹Ð¹ IP**: `62.113.42.135`
- **ÐŸÑ€Ð¸Ð²Ð°Ñ‚Ð½Ñ‹Ð¹ IP**: `192.168.0.4`
- **SSH Ð¿Ð¾Ð´ÐºÐ»ÑŽÑ‡ÐµÐ½Ð¸Ðµ**: `ssh root@62.113.42.135`
- **Root Ð¿Ð°Ñ€Ð¾Ð»ÑŒ**: `********` (ÑƒÐºÐ°Ð·Ð°Ð½ Ð² Ð¿Ð°Ð½ÐµÐ»Ð¸ TimeWeb)

## ðŸ”§ Ð¨Ð°Ð³ 1: ÐŸÐ¾Ð´Ð³Ð¾Ñ‚Ð¾Ð²ÐºÐ° ÑÐµÑ€Ð²ÐµÑ€Ð°

### ÐŸÐ¾Ð´ÐºÐ»ÑŽÑ‡ÐµÐ½Ð¸Ðµ Ðº ÑÐµÑ€Ð²ÐµÑ€Ñƒ
```bash
ssh root@62.113.42.135
```
Ð’Ð²ÐµÐ´Ð¸Ñ‚Ðµ root Ð¿Ð°Ñ€Ð¾Ð»ÑŒ Ð¸Ð· Ð¿Ð°Ð½ÐµÐ»Ð¸ TimeWeb.

### ÐžÐ±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ðµ ÑÐ¸ÑÑ‚ÐµÐ¼Ñ‹
```bash
apt update && apt upgrade -y
```

### Ð£ÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ° Docker Ð¸ Docker Compose
```bash
# Ð£ÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ° Docker
curl -fsSL https://get.docker.com -o get-docker.sh
sh get-docker.sh

# Ð£ÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ° Docker Compose
curl -L "https://github.com/docker/compose/releases/download/v2.20.0/docker-compose-$(uname -s)-$(uname -m)" -o /usr/local/bin/docker-compose
chmod +x /usr/local/bin/docker-compose

# Ð”Ð¾Ð±Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ñ Ð² Ð³Ñ€ÑƒÐ¿Ð¿Ñƒ docker
usermod -aG docker $USER
```

### Ð£ÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ° Nginx (Ð´Ð»Ñ SSL)
```bash
apt install nginx certbot python3-certbot-nginx -y
```

## ðŸ“ Ð¨Ð°Ð³ 2: Ð—Ð°Ð³Ñ€ÑƒÐ·ÐºÐ° Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð°

### ÐšÐ»Ð¾Ð½Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð°
```bash
cd /var/www
git clone https://github.com/your-username/project-forel.git
cd project-forel
```

### Ð¡Ð¾Ð·Ð´Ð°Ð½Ð¸Ðµ Ñ„Ð°Ð¹Ð»Ð° Ñ Ð¿ÐµÑ€ÐµÐ¼ÐµÐ½Ð½Ñ‹Ð¼Ð¸ Ð¾ÐºÑ€ÑƒÐ¶ÐµÐ½Ð¸Ñ
```bash
# Ð¡Ð¾Ð·Ð´Ð°ÐµÐ¼ .env Ñ„Ð°Ð¹Ð»
cat > .env << EOF
# Telegram Bot Configuration
TELEGRAM_BOT_TOKEN=8489499457:AAEYJsk8jN3qynY2J4DoPSlqU1ghMdwlbSQ
WEBAPP_URL=https://telegram.forelrest.com
ADMIN_CHAT_ID=-4729513227

# API Configuration
API_BASE_URL=https://forelrest.com/api
PORT=3001
EOF
```

## ðŸŒ Ð¨Ð°Ð³ 3: ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ° Ð´Ð¾Ð¼ÐµÐ½Ð¾Ð²

### ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ° DNS Ð² TimeWeb
1. Ð—Ð°Ð¹Ð´Ð¸Ñ‚Ðµ Ð² Ð¿Ð°Ð½ÐµÐ»ÑŒ ÑƒÐ¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ñ TimeWeb
2. ÐŸÐµÑ€ÐµÐ¹Ð´Ð¸Ñ‚Ðµ Ð² Ñ€Ð°Ð·Ð´ÐµÐ» "Ð”Ð¾Ð¼ÐµÐ½Ñ‹"
3. Ð”Ð¾Ð±Ð°Ð²ÑŒÑ‚Ðµ A-Ð·Ð°Ð¿Ð¸ÑÐ¸:
   - `forelrest.com` â†’ `62.113.42.135`
   - `www.forelrest.com` â†’ `62.113.42.135`
   - `telegram.forelrest.com` â†’ `62.113.42.135`

### ÐŸÐ¾Ð»ÑƒÑ‡ÐµÐ½Ð¸Ðµ SSL ÑÐµÑ€Ñ‚Ð¸Ñ„Ð¸ÐºÐ°Ñ‚Ð¾Ð²
```bash
# ÐžÑÑ‚Ð°Ð½Ð°Ð²Ð»Ð¸Ð²Ð°ÐµÐ¼ nginx Ð²Ñ€ÐµÐ¼ÐµÐ½Ð½Ð¾
systemctl stop nginx

# ÐŸÐ¾Ð»ÑƒÑ‡Ð°ÐµÐ¼ ÑÐµÑ€Ñ‚Ð¸Ñ„Ð¸ÐºÐ°Ñ‚Ñ‹
certbot certonly --standalone -d forelrest.com -d www.forelrest.com
certbot certonly --standalone -d telegram.forelrest.com

# Ð¡Ð¾Ð·Ð´Ð°ÐµÐ¼ Ð¿Ð°Ð¿ÐºÑƒ Ð´Ð»Ñ SSL
mkdir -p ssl
cp /etc/letsencrypt/live/forelrest.com/fullchain.pem ssl/forelrest.com.crt
cp /etc/letsencrypt/live/forelrest.com/privkey.pem ssl/forelrest.com.key
cp /etc/letsencrypt/live/telegram.forelrest.com/fullchain.pem ssl/telegram.forelrest.com.crt
cp /etc/letsencrypt/live/telegram.forelrest.com/privkey.pem ssl/telegram.forelrest.com.key
```

## ðŸ³ Ð¨Ð°Ð³ 4: Ð Ð°Ð·Ð²ÐµÑ€Ñ‚Ñ‹Ð²Ð°Ð½Ð¸Ðµ Ñ Docker

### Ð¡Ð±Ð¾Ñ€ÐºÐ° Ð¸ Ð·Ð°Ð¿ÑƒÑÐº
```bash
# Ð¡Ð±Ð¾Ñ€ÐºÐ° Ð¾Ð±Ñ€Ð°Ð·Ð¾Ð²
docker-compose -f docker-compose.prod.yml build --no-cache

# Ð—Ð°Ð¿ÑƒÑÐº ÐºÐ¾Ð½Ñ‚ÐµÐ¹Ð½ÐµÑ€Ð¾Ð²
docker-compose -f docker-compose.prod.yml up -d

# ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° ÑÑ‚Ð°Ñ‚ÑƒÑÐ°
docker-compose -f docker-compose.prod.yml ps
```

### ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° Ð»Ð¾Ð³Ð¾Ð²
```bash
# Ð›Ð¾Ð³Ð¸ Ð²ÑÐµÑ… ÑÐµÑ€Ð²Ð¸ÑÐ¾Ð²
docker-compose -f docker-compose.prod.yml logs

# Ð›Ð¾Ð³Ð¸ ÐºÐ¾Ð½ÐºÑ€ÐµÑ‚Ð½Ð¾Ð³Ð¾ ÑÐµÑ€Ð²Ð¸ÑÐ°
docker-compose -f docker-compose.prod.yml logs web-app
docker-compose -f docker-compose.prod.yml logs telegram-bot
```

## ðŸ”„ Ð¨Ð°Ð³ 5: ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ° Ð°Ð²Ñ‚Ð¾Ð¿ÐµÑ€ÐµÐ·Ð°Ð¿ÑƒÑÐºÐ°

### Ð¡Ð¾Ð·Ð´Ð°Ð½Ð¸Ðµ systemd ÑÐµÑ€Ð²Ð¸ÑÐ°
```bash
cat > /etc/systemd/system/forel.service << EOF
[Unit]
Description=Forel Restaurant Application
Requires=docker.service
After=docker.service

[Service]
Type=oneshot
RemainAfterExit=yes
WorkingDirectory=/var/www/project-forel
ExecStart=/usr/local/bin/docker-compose -f docker-compose.prod.yml up -d
ExecStop=/usr/local/bin/docker-compose -f docker-compose.prod.yml down
TimeoutStartSec=0

[Install]
WantedBy=multi-user.target
EOF

# ÐÐºÑ‚Ð¸Ð²Ð°Ñ†Ð¸Ñ ÑÐµÑ€Ð²Ð¸ÑÐ°
systemctl enable forel.service
systemctl start forel.service
```

## ðŸ”§ Ð¨Ð°Ð³ 6: ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ° Telegram Ð±Ð¾Ñ‚Ð°

### ÐžÐ±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ðµ WebApp URL
1. ÐÐ°Ð¹Ð´Ð¸Ñ‚Ðµ @BotFather Ð² Telegram
2. ÐžÑ‚Ð¿Ñ€Ð°Ð²ÑŒÑ‚Ðµ ÐºÐ¾Ð¼Ð°Ð½Ð´Ñƒ `/mybots`
3. Ð’Ñ‹Ð±ÐµÑ€Ð¸Ñ‚Ðµ Ð²Ð°ÑˆÐµÐ³Ð¾ Ð±Ð¾Ñ‚Ð°
4. ÐÐ°Ð¶Ð¼Ð¸Ñ‚Ðµ "Bot Settings" â†’ "Menu Button"
5. Ð£ÑÑ‚Ð°Ð½Ð¾Ð²Ð¸Ñ‚Ðµ URL: `https://telegram.forelrest.com`

### ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° Ñ€Ð°Ð±Ð¾Ñ‚Ñ‹ Ð±Ð¾Ñ‚Ð°
```bash
# ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° Ð»Ð¾Ð³Ð¾Ð² Ð±Ð¾Ñ‚Ð°
docker-compose -f docker-compose.prod.yml logs telegram-bot
```

## ðŸ“Š Ð¨Ð°Ð³ 7: ÐœÐ¾Ð½Ð¸Ñ‚Ð¾Ñ€Ð¸Ð½Ð³ Ð¸ Ð¾Ð±ÑÐ»ÑƒÐ¶Ð¸Ð²Ð°Ð½Ð¸Ðµ

### ÐŸÐ¾Ð»ÐµÐ·Ð½Ñ‹Ðµ ÐºÐ¾Ð¼Ð°Ð½Ð´Ñ‹
```bash
# Ð¡Ñ‚Ð°Ñ‚ÑƒÑ Ð²ÑÐµÑ… ÐºÐ¾Ð½Ñ‚ÐµÐ¹Ð½ÐµÑ€Ð¾Ð²
docker-compose -f docker-compose.prod.yml ps

# ÐŸÐµÑ€ÐµÐ·Ð°Ð¿ÑƒÑÐº ÑÐµÑ€Ð²Ð¸ÑÐ°
docker-compose -f docker-compose.prod.yml restart web-app

# ÐžÐ±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ðµ Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ñ
cd /var/www/project-forel
git pull
docker-compose -f docker-compose.prod.yml up -d --build

# ÐŸÑ€Ð¾ÑÐ¼Ð¾Ñ‚Ñ€ Ð»Ð¾Ð³Ð¾Ð² Ð² Ñ€ÐµÐ°Ð»ÑŒÐ½Ð¾Ð¼ Ð²Ñ€ÐµÐ¼ÐµÐ½Ð¸
docker-compose -f docker-compose.prod.yml logs -f
```

### ÐÐ²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¾Ðµ Ð¾Ð±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ðµ SSL
```bash
# Ð”Ð¾Ð±Ð°Ð²Ð»ÑÐµÐ¼ Ð² crontab
crontab -e

# Ð”Ð¾Ð±Ð°Ð²Ð»ÑÐµÐ¼ ÑÑ‚Ñ€Ð¾ÐºÑƒ Ð´Ð»Ñ Ð¾Ð±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ñ ÑÐµÑ€Ñ‚Ð¸Ñ„Ð¸ÐºÐ°Ñ‚Ð¾Ð²
0 12 * * * /usr/bin/certbot renew --quiet && cp /etc/letsencrypt/live/forelrest.com/fullchain.pem /var/www/project-forel/ssl/forelrest.com.crt && cp /etc/letsencrypt/live/forelrest.com/privkey.pem /var/www/project-forel/ssl/forelrest.com.key && docker-compose -f /var/www/project-forel/docker-compose.prod.yml restart nginx
```

## âœ… ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° Ñ€Ð°Ð±Ð¾Ñ‚Ð¾ÑÐ¿Ð¾ÑÐ¾Ð±Ð½Ð¾ÑÑ‚Ð¸

### Ð¢ÐµÑÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ ÑÐ°Ð¹Ñ‚Ð¾Ð²
- **forelrest.com** - Ð¾ÑÐ½Ð¾Ð²Ð½Ð¾Ðµ Ð²ÐµÐ±-Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ðµ
- **telegram.forelrest.com** - Telegram WebApp
- **forelrest.com/api** - API ÑÐµÑ€Ð²ÐµÑ€

### Ð¢ÐµÑÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ Telegram Ð±Ð¾Ñ‚Ð°
1. ÐÐ°Ð¹Ð´Ð¸Ñ‚Ðµ Ð±Ð¾Ñ‚Ð° Ð² Telegram
2. ÐžÑ‚Ð¿Ñ€Ð°Ð²ÑŒÑ‚Ðµ `/start`
3. ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ Ñ€Ð°Ð±Ð¾Ñ‚Ñƒ ÐºÐ½Ð¾Ð¿ÐºÐ¸ "ÐžÑ‚ÐºÑ€Ñ‹Ñ‚ÑŒ Ð¼ÐµÐ½ÑŽ"

## ðŸ†˜ Ð£ÑÑ‚Ñ€Ð°Ð½ÐµÐ½Ð¸Ðµ Ð½ÐµÐ¿Ð¾Ð»Ð°Ð´Ð¾Ðº

### Ð•ÑÐ»Ð¸ ÑÐ°Ð¹Ñ‚Ñ‹ Ð½Ðµ Ð¾Ñ‚ÐºÑ€Ñ‹Ð²Ð°ÑŽÑ‚ÑÑ
```bash
# ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° Ð¿Ð¾Ñ€Ñ‚Ð¾Ð²
netstat -tlnp | grep :80
netstat -tlnp | grep :443

# ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° ÐºÐ¾Ð½Ñ‚ÐµÐ¹Ð½ÐµÑ€Ð¾Ð²
docker ps
docker-compose -f docker-compose.prod.yml ps
```

### Ð•ÑÐ»Ð¸ Ð±Ð¾Ñ‚ Ð½Ðµ Ñ€Ð°Ð±Ð¾Ñ‚Ð°ÐµÑ‚
```bash
# ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° Ð»Ð¾Ð³Ð¾Ð² Ð±Ð¾Ñ‚Ð°
docker-compose -f docker-compose.prod.yml logs telegram-bot

# ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° Ð¿ÐµÑ€ÐµÐ¼ÐµÐ½Ð½Ñ‹Ñ… Ð¾ÐºÑ€ÑƒÐ¶ÐµÐ½Ð¸Ñ
docker-compose -f docker-compose.prod.yml exec telegram-bot env
```

### ÐŸÐµÑ€ÐµÐ·Ð°Ð¿ÑƒÑÐº Ð²ÑÐµÐ³Ð¾ Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ñ
```bash
cd /var/www/project-forel
docker-compose -f docker-compose.prod.yml down
docker-compose -f docker-compose.prod.yml up -d
```

## ðŸ“ž ÐŸÐ¾Ð´Ð´ÐµÑ€Ð¶ÐºÐ°

ÐŸÑ€Ð¸ Ð²Ð¾Ð·Ð½Ð¸ÐºÐ½Ð¾Ð²ÐµÐ½Ð¸Ð¸ Ð¿Ñ€Ð¾Ð±Ð»ÐµÐ¼:
1. ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ Ð»Ð¾Ð³Ð¸: `docker-compose -f docker-compose.prod.yml logs`
2. Ð£Ð±ÐµÐ´Ð¸Ñ‚ÐµÑÑŒ, Ñ‡Ñ‚Ð¾ Ð²ÑÐµ Ð¿Ð¾Ñ€Ñ‚Ñ‹ Ð¾Ñ‚ÐºÑ€Ñ‹Ñ‚Ñ‹
3. ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ Ð½Ð°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ¸ DNS
4. Ð£Ð±ÐµÐ´Ð¸Ñ‚ÐµÑÑŒ, Ñ‡Ñ‚Ð¾ SSL ÑÐµÑ€Ñ‚Ð¸Ñ„Ð¸ÐºÐ°Ñ‚Ñ‹ Ð´ÐµÐ¹ÑÑ‚Ð²Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ñ‹

---

**ðŸŽ‰ ÐŸÐ¾Ð·Ð´Ñ€Ð°Ð²Ð»ÑÐµÐ¼! Ð’Ð°ÑˆÐµ Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ðµ Ñ€Ð°Ð·Ð²ÐµÑ€Ð½ÑƒÑ‚Ð¾ Ð¸ Ð³Ð¾Ñ‚Ð¾Ð²Ð¾ Ðº Ñ€Ð°Ð±Ð¾Ñ‚Ðµ!**

